// ë©”ì¸í™”ë©´, íƒ­ ë¿Œë ¤ì£¼ê¸°
import {View,Text,FlatList,ActivityIndicator,TouchableOpacity} from 'react-native'
import {useState,useCallback,useRef} from 'react'
import {useUser} from '../../global/contexts/conText'
import {useFocusEffect} from '@react-navigation/native'
import Svg, { Path, G, Mask, Defs, ClipPath, Rect } from 'react-native-svg'

// SMS ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
const SmsIcon = () => (
    <Svg width="30" height="30" viewBox="0 0 24 24" fill="none">
        <Path
            d="M17 20.5H7C4 20.5 2 19 2 15.5V8.5C2 5 4 3.5 7 3.5H17C20 3.5 22 5 22 8.5V15.5C22 19 20 20.5 17 20.5Z"
            stroke="#171717"
            strokeWidth="1.5"
            strokeMiterlimit="10"
            strokeLinecap="round"
            strokeLinejoin="round"
        />
        <Path
            d="M17 9L13.87 11.5C12.84 12.32 11.15 12.32 10.12 11.5L7 9"
            stroke="#171717"
            strokeWidth="1.5"
            strokeMiterlimit="10"
            strokeLinecap="round"
            strokeLinejoin="round"
        />
    </Svg>
)

// Star ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
const StarIcon = () => (
    <Svg width="30" height="30" viewBox="0 0 24 24" fill="none">
        <Path
            d="M13.73 3.51001L15.49 7.03001C15.73 7.52002 16.37 7.99001 16.91 8.08001L20.1 8.61001C22.14 8.95001 22.62 10.43 21.15 11.89L18.67 14.37C18.25 14.79 18.02 15.6 18.15 16.18L18.86 19.25C19.42 21.68 18.13 22.62 15.98 21.35L12.99 19.58C12.45 19.26 11.56 19.26 11.01 19.58L8.02 21.35C5.88 22.62 4.58 21.67 5.14 19.25L5.85 16.18C5.98 15.6 5.75 14.79 5.33 14.37L2.85 11.89C1.39 10.43 1.86 8.95001 3.9 8.61001L7.09 8.08001C7.62 7.99001 8.26 7.52002 8.5 7.03001L10.26 3.51001C11.22 1.60001 12.78 1.60001 13.73 3.51001Z"
            stroke="#171717"
            strokeWidth="1.5"
            strokeLinecap="round"
            strokeLinejoin="round"
        />
    </Svg>
)

// GitTeol ë¡œê³  ì»´í¬ë„ŒíŠ¸
const GitTeolLogo = () => (
    <Svg width="68" height="17" viewBox="0 0 68 17" fill="none">
        <Path
            d="M8.86328 6.275C8.21328 6.225 7.74662 6.09167 7.46328 5.875C7.19662 5.65833 7.03828 5.45833 6.98828 5.275C6.93828 5.075 6.91328 4.975 6.91328 4.975C6.91328 4.975 6.89661 4.85833 6.86328 4.625C6.82995 4.39167 6.74661 4.15833 6.61328 3.925C6.47995 3.69167 6.24661 3.56667 5.91328 3.55C5.66328 3.53333 5.46328 3.68333 5.31328 4C5.16328 4.3 5.04661 4.70833 4.96328 5.225C4.87995 5.74167 4.82161 6.31667 4.78828 6.95C4.77161 7.56667 4.76328 8.19167 4.76328 8.825C4.77995 9.65833 4.82161 10.4667 4.88828 11.25C4.97161 12.0167 5.10495 12.6417 5.28828 13.125C5.48828 13.6083 5.76328 13.85 6.11328 13.85C6.37995 13.85 6.57995 13.7333 6.71328 13.5C6.84661 13.25 6.92995 12.975 6.96328 12.675C7.01328 12.375 7.03828 12.1083 7.03828 11.875C7.03828 11.6417 7.03828 11.525 7.03828 11.525C7.03828 11.525 6.93828 11.5333 6.73828 11.55C6.55495 11.5667 6.36328 11.5333 6.16328 11.45C5.96328 11.35 5.86328 11.1417 5.86328 10.825C5.86328 10.4917 5.92995 10.2667 6.06328 10.15C6.21328 10.0333 6.35495 9.96667 6.48828 9.95C6.63828 9.93333 6.71328 9.925 6.71328 9.925H8.88828C8.88828 9.925 8.99661 9.925 9.21328 9.925C9.42995 9.925 9.67995 9.96667 9.96328 10.05C10.2466 10.1167 10.4966 10.25 10.7133 10.45C10.9299 10.6333 11.0466 10.9167 11.0633 11.3C11.0966 12.2333 10.9633 13.0083 10.6633 13.625C10.3633 14.225 9.94661 14.7 9.41328 15.05C8.89661 15.4 8.31328 15.65 7.66328 15.8C7.02995 15.9333 6.37995 16 5.71328 16C5.04661 16 4.41328 15.8833 3.81328 15.65C3.21328 15.4167 2.67995 15.0083 2.21328 14.425C1.74661 13.825 1.36328 13 1.06328 11.95C0.779948 10.9 0.621615 9.56667 0.588281 7.95C0.554948 6.65 0.679948 5.59167 0.963281 4.775C1.24661 3.95833 1.61328 3.325 2.06328 2.875C2.51328 2.425 2.97995 2.10833 3.46328 1.925C3.96328 1.725 4.41328 1.6 4.81328 1.55C5.21328 1.5 5.49661 1.46667 5.66328 1.45C5.86328 1.43333 6.18828 1.45 6.63828 1.5C7.08828 1.55 7.57161 1.66667 8.08828 1.85C8.60495 2.01667 9.07995 2.275 9.51328 2.625C9.96328 2.975 10.2966 3.44167 10.5133 4.025C10.7299 4.60833 10.7716 5.05833 10.6383 5.375C10.5049 5.675 10.2966 5.89167 10.0133 6.025C9.72995 6.15833 9.46328 6.23333 9.21328 6.25C8.97995 6.26667 8.86328 6.275 8.86328 6.275ZM14.4338 5.475C14.4338 5.475 14.3255 5.475 14.1088 5.475C13.8921 5.45833 13.6338 5.40833 13.3338 5.325C13.0505 5.225 12.7921 5.05 12.5588 4.8C12.3255 4.55 12.2005 4.175 12.1838 3.675C12.1671 3.175 12.2421 2.80833 12.4088 2.575C12.5755 2.325 12.7838 2.15833 13.0338 2.075C13.2838 1.975 13.5255 1.925 13.7588 1.925C13.9921 1.90833 14.1588 1.89167 14.2588 1.875C14.3588 1.85833 14.5255 1.875 14.7588 1.925C14.9921 1.95833 15.2338 2.05 15.4838 2.2C15.7338 2.33333 15.9421 2.54167 16.1088 2.825C16.2755 3.09167 16.3421 3.45 16.3088 3.9C16.2755 4.33333 16.1588 4.66667 15.9588 4.9C15.7755 5.11667 15.5588 5.26667 15.3088 5.35C15.0755 5.41667 14.8671 5.45833 14.6838 5.475C14.5171 5.475 14.4338 5.475 14.4338 5.475ZM13.5588 14.45L12.9588 8.75C12.9588 8.75 12.9171 8.66667 12.8338 8.5C12.7671 8.31667 12.7171 8.19167 12.6838 8.125C12.6671 8.075 12.6338 7.975 12.5838 7.825C12.5505 7.65833 12.5921 7.48333 12.7088 7.3C12.8421 7.11667 13.1255 6.98333 13.5588 6.9C14.0088 6.81667 14.4755 6.79167 14.9588 6.825C15.4421 6.85833 15.8671 7.00833 16.2338 7.275C16.6171 7.525 16.8505 7.96667 16.9338 8.6C17.0005 9.06667 17.0671 9.625 17.1338 10.275C17.2005 10.9083 17.2588 11.5333 17.3088 12.15C17.3755 12.75 17.4255 13.2583 17.4588 13.675C17.5088 14.075 17.5338 14.275 17.5338 14.275C17.5338 14.275 17.5421 14.3667 17.5588 14.55C17.5755 14.7167 17.5505 14.9167 17.4838 15.15C17.4171 15.3667 17.2505 15.5667 16.9838 15.75C16.7338 15.9167 16.3255 16 15.7588 16C15.1921 16 14.7588 15.925 14.4588 15.775C14.1588 15.6083 13.9421 15.425 13.8088 15.225C13.6921 15.025 13.6171 14.85 13.5838 14.7C13.5671 14.5333 13.5588 14.45 13.5588 14.45ZM18.9232 2.35C18.9066 1.93333 19.0316 1.6 19.2982 1.35C19.5649 1.08333 20.1566 0.924999 21.0732 0.875C21.6899 0.841666 22.1399 0.916666 22.4232 1.1C22.7066 1.28333 22.8816 1.475 22.9482 1.675C23.0316 1.85833 23.0732 1.95 23.0732 1.95L23.2232 4.175C23.2232 4.175 23.3566 4.175 23.6232 4.175C23.9066 4.175 24.2232 4.20833 24.5732 4.275C24.9399 4.325 25.2566 4.43333 25.5232 4.6C25.8066 4.76667 25.9482 5.025 25.9482 5.375C25.9482 5.725 25.8149 5.98333 25.5482 6.15C25.2816 6.31667 24.9732 6.43333 24.6232 6.5C24.2732 6.55 23.9566 6.575 23.6732 6.575C23.4066 6.575 23.2732 6.575 23.2732 6.575C23.2732 6.575 23.2732 6.76667 23.2732 7.15C23.2899 7.51667 23.2982 8 23.2982 8.6C23.2982 9.18333 23.3066 9.80833 23.3232 10.475C23.3399 11.1417 23.3482 11.7833 23.3482 12.4C23.3482 13 23.3482 13.5083 23.3482 13.925C23.3649 14.325 23.3732 14.5583 23.3732 14.625C23.3732 14.7417 23.3316 14.9083 23.2482 15.125C23.1816 15.3417 22.9899 15.5417 22.6732 15.725C22.3732 15.9083 21.8732 16 21.1732 16C20.6566 16 20.2566 15.9417 19.9732 15.825C19.6899 15.6917 19.4816 15.55 19.3482 15.4C19.2316 15.2333 19.1649 15.0917 19.1482 14.975C19.1316 14.8417 19.1232 14.775 19.1232 14.775L18.9232 2.35ZM30.5275 4.125C30.3109 4.15833 30.0025 4.18333 29.6025 4.2C29.2025 4.2 28.7942 4.175 28.3775 4.125C27.9609 4.075 27.6025 3.98333 27.3025 3.85C27.0025 3.7 26.8359 3.48333 26.8025 3.2C26.7859 2.91667 26.8692 2.69167 27.0525 2.525C27.2525 2.35833 27.4859 2.23333 27.7525 2.15C28.0192 2.05 28.2525 1.99167 28.4525 1.975C28.6692 1.94167 28.7775 1.925 28.7775 1.925L35.7775 1.275C35.7775 1.275 35.8942 1.275 36.1275 1.275C36.3609 1.25833 36.6275 1.26667 36.9275 1.3C37.2442 1.33333 37.5275 1.41667 37.7775 1.55C38.0275 1.66667 38.1609 1.85833 38.1775 2.125C38.2109 2.39167 38.1275 2.61667 37.9275 2.8C37.7442 2.96667 37.5192 3.10833 37.2525 3.225C36.9859 3.325 36.7525 3.4 36.5525 3.45C36.3525 3.48333 36.2525 3.5 36.2525 3.5L34.6525 3.75C34.7192 4.16667 34.7942 4.75833 34.8775 5.525C34.9609 6.275 35.0442 7.10833 35.1275 8.025C35.2109 8.94167 35.2859 9.84167 35.3525 10.725C35.4192 11.6083 35.4692 12.4 35.5025 13.1C35.5525 13.8 35.5775 14.3 35.5775 14.6C35.5775 14.9833 35.4692 15.275 35.2525 15.475C35.0525 15.6583 34.8109 15.7917 34.5275 15.875C34.2609 15.9417 34.0192 15.9833 33.8025 16C33.6025 16 33.5025 16 33.5025 16C33.5025 16 33.3942 16 33.1775 16C32.9609 15.9833 32.7109 15.9167 32.4275 15.8C32.1609 15.6833 31.9192 15.4667 31.7025 15.15C31.5025 14.8333 31.4025 14.3583 31.4025 13.725C31.4025 13.1583 31.3692 12.4667 31.3025 11.65C31.2525 10.8333 31.1859 9.99167 31.1025 9.125C31.0192 8.24167 30.9275 7.425 30.8275 6.675C30.7442 5.925 30.6692 5.31667 30.6025 4.85C30.5525 4.36667 30.5275 4.125 30.5275 4.125ZM49.4316 8.45C49.3816 9.28333 49.1483 9.95833 48.7316 10.475C48.315 10.975 47.8066 11.3583 47.2066 11.625C46.6233 11.875 46.04 12.05 45.4566 12.15C44.8733 12.2333 44.3816 12.275 43.9816 12.275C43.5983 12.275 43.4066 12.275 43.4066 12.275C43.5066 12.8583 43.6483 13.275 43.8316 13.525C44.015 13.775 44.215 13.9167 44.4316 13.95C44.665 13.9833 44.8816 13.9667 45.0816 13.9C45.2816 13.8167 45.44 13.725 45.5566 13.625C45.69 13.525 45.7566 13.475 45.7566 13.475C45.7566 13.475 45.8483 13.4 46.0316 13.25C46.215 13.1 46.4983 12.9583 46.8816 12.825C47.2816 12.675 47.7816 12.6 48.3816 12.6C49.065 12.6 49.5233 12.6917 49.7566 12.875C50.0066 13.0417 50.1233 13.2417 50.1066 13.475C50.1066 13.6917 50.0566 13.8917 49.9566 14.075C49.8733 14.2417 49.8316 14.325 49.8316 14.325C49.8316 14.325 49.7566 14.4083 49.6066 14.575C49.4733 14.725 49.2233 14.9083 48.8566 15.125C48.49 15.3417 47.9816 15.5417 47.3316 15.725C46.6816 15.8917 45.8483 15.9833 44.8316 16C43.8483 16.0167 43.0233 15.8833 42.3566 15.6C41.69 15.3167 41.14 14.95 40.7066 14.5C40.2733 14.0333 39.94 13.55 39.7066 13.05C39.49 12.5333 39.3316 12.0583 39.2316 11.625C39.1483 11.175 39.1066 10.825 39.1066 10.575C39.1066 10.325 39.1233 10 39.1566 9.6C39.2066 9.2 39.315 8.78333 39.4816 8.35C39.665 7.9 39.94 7.475 40.3066 7.075C40.6733 6.675 41.1733 6.35 41.8066 6.1C42.4566 5.85 43.2816 5.71667 44.2816 5.7C45.5316 5.68333 46.5066 5.79167 47.2066 6.025C47.9066 6.25833 48.415 6.54167 48.7316 6.875C49.0483 7.20833 49.24 7.525 49.3066 7.825C49.39 8.125 49.4316 8.33333 49.4316 8.45ZM43.0566 10.55C44.0733 10.4667 44.8316 10.25 45.3316 9.9C45.8316 9.55 46.1233 9.15833 46.2066 8.725C46.29 8.29167 46.2066 7.925 45.9566 7.625C45.7233 7.30833 45.365 7.16667 44.8816 7.2C44.3983 7.21667 44.0316 7.4 43.7816 7.75C43.5316 8.08333 43.3566 8.475 43.2566 8.925C43.1566 9.35833 43.0983 9.74167 43.0816 10.075C43.065 10.3917 43.0566 10.55 43.0566 10.55ZM56.6928 5.85C57.3094 5.8 57.7844 5.86667 58.1178 6.05C58.4511 6.23333 58.6511 6.34167 58.7178 6.375C58.8844 6.45833 59.0344 6.55 59.1678 6.65C59.3178 6.75 59.3928 6.8 59.3928 6.8C59.3928 6.8 59.5178 6.84167 59.7678 6.925C60.0178 7.00833 60.3094 7.20833 60.6428 7.525C60.9761 7.825 61.2844 8.3 61.5678 8.95C61.8511 9.6 62.0178 10.4833 62.0678 11.6C62.1011 12.35 61.9844 12.9833 61.7178 13.5C61.4511 14 61.0928 14.4167 60.6428 14.75C60.2094 15.0667 59.7344 15.3167 59.2178 15.5C58.7178 15.6667 58.2344 15.7833 57.7678 15.85C57.3178 15.9167 56.9428 15.9583 56.6428 15.975C56.3594 15.9917 56.2178 16 56.2178 16C56.2178 16 56.0511 16 55.7178 16C55.4011 16 55.0011 15.95 54.5178 15.85C54.0344 15.7333 53.5511 15.5167 53.0678 15.2C52.6011 14.8667 52.2094 14.3833 51.8928 13.75C51.5928 13.1167 51.4594 12.275 51.4928 11.225C51.5261 10.175 51.7178 9.31667 52.0678 8.65C52.4344 7.96667 52.8678 7.43333 53.3678 7.05C53.8844 6.66667 54.3928 6.39167 54.8928 6.225C55.4094 6.05833 55.8344 5.95833 56.1678 5.925C56.5178 5.875 56.6928 5.85 56.6928 5.85ZM56.7928 8.3C56.7928 8.3 56.6844 8.43333 56.4678 8.7C56.2678 8.96667 56.0594 9.34167 55.8428 9.825C55.6428 10.3083 55.5428 10.875 55.5428 11.525C55.5428 12.1583 55.6178 12.6583 55.7678 13.025C55.9178 13.3917 56.0761 13.6583 56.2428 13.825C56.4261 13.975 56.5678 14.05 56.6678 14.05C56.7678 14.05 56.9261 14.0083 57.1428 13.925C57.3761 13.825 57.5844 13.6083 57.7678 13.275C57.9511 12.9417 58.0344 12.4167 58.0178 11.7C58.0011 11.1 57.9344 10.6167 57.8178 10.25C57.7178 9.88333 57.5761 9.55833 57.3928 9.275C57.2261 8.975 57.0261 8.65 56.7928 8.3ZM65.1895 0.949999C65.1895 0.949999 65.2978 0.958332 65.5145 0.975C65.7311 0.975 65.9811 1.01667 66.2645 1.1C66.5478 1.16667 66.7978 1.29167 67.0145 1.475C67.2311 1.65833 67.3395 1.91667 67.3395 2.25C67.3395 2.46667 67.3478 2.90833 67.3645 3.575C67.3811 4.24167 67.3978 5.03333 67.4145 5.95C67.4311 6.85 67.4478 7.78333 67.4645 8.75C67.4978 9.7 67.5228 10.5917 67.5395 11.425C67.5561 12.2583 67.5645 12.9333 67.5645 13.45C67.5811 13.9667 67.5895 14.225 67.5895 14.225C67.5895 14.225 67.5895 14.3167 67.5895 14.5C67.5895 14.6667 67.5395 14.875 67.4395 15.125C67.3395 15.3583 67.1478 15.5667 66.8645 15.75C66.5811 15.9167 66.1645 16 65.6145 16C64.8811 16 64.3478 15.9083 64.0145 15.725C63.6811 15.525 63.4728 15.3083 63.3895 15.075C63.3228 14.825 63.2978 14.6333 63.3145 14.5C63.3311 14.4333 63.3395 14.1417 63.3395 13.625C63.3395 13.1083 63.3311 12.4583 63.3145 11.675C63.3145 10.8917 63.3061 10.05 63.2895 9.15C63.2728 8.25 63.2561 7.36667 63.2395 6.5C63.2228 5.61667 63.1978 4.83333 63.1645 4.15C63.1478 3.45 63.1311 2.93333 63.1145 2.6C63.0811 2.13333 63.1895 1.78333 63.4395 1.55C63.7061 1.31667 64.0061 1.16667 64.3395 1.1C64.6895 1.01667 64.9728 0.966666 65.1895 0.949999Z"
            fill="black"
        />
    </Svg>
)

// ë³„ ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ (ì¢‹ì•„ìš” ê¸°ëŠ¥)
const LikeStarIcon = ({ liked, onPress }) => (
    <TouchableOpacity activeOpacity={0.6} onPress={onPress}>
        <Svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <Path
                d="M13.73 3.51001L15.49 7.03001C15.73 7.52002 16.37 7.99001 16.91 8.08001L20.1 8.61001C22.14 8.95001 22.62 10.43 21.15 11.89L18.67 14.37C18.25 14.79 18.02 15.6 18.15 16.18L18.86 19.25C19.42 21.68 18.13 22.62 15.98 21.35L12.99 19.58C12.45 19.26 11.56 19.26 11.01 19.58L8.02 21.35C5.88 22.62 4.58 21.67 5.14 19.25L5.85 16.18C5.98 15.6 5.75 14.79 5.33 14.37L2.85 11.89C1.39 10.43 1.86 8.95001 3.9 8.61001L7.09 8.08001C7.62 7.99001 8.26 7.52002 8.5 7.03001L10.26 3.51001C11.22 1.60001 12.78 1.60001 13.73 3.51001Z"
                stroke="#171717"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
                fill={liked ? "#FFD700" : "none"}
            />
        </Svg>
    </TouchableOpacity>
)

// ëŒ“ê¸€ ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
const CommentIcon = ({ onPress }) => (
    <TouchableOpacity activeOpacity={0.6} onPress={onPress}>
        <Svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <Mask id="path-1-inside-1_2551_1583" fill="white">
                <Path d="M12 1C18.0751 1 23 5.92487 23 12C23 14.0572 22.4331 15.9811 21.4502 17.6279L22.8477 22.8408L17.6377 21.4443C15.9887 22.4308 14.0612 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1Z"/>
            </Mask>
            <Path
                d="M21.4502 17.6279L19.9045 16.7055C19.6552 17.1232 19.5856 17.6241 19.7116 18.094L21.4502 17.6279ZM22.8477 22.8408L22.3816 24.5794C23.0028 24.746 23.6657 24.5684 24.1205 24.1136C24.5752 23.6588 24.7528 22.9959 24.5863 22.3747L22.8477 22.8408ZM17.6377 21.4443L18.1037 19.7057C17.6332 19.5796 17.1317 19.6496 16.7136 19.8996L17.6377 21.4443ZM12 1V2.8C17.081 2.8 21.2 6.91898 21.2 12H23H24.8C24.8 4.93076 19.0692 -0.8 12 -0.8V1ZM23 12H21.2C21.2 13.7219 20.7264 15.3284 19.9045 16.7055L21.4502 17.6279L22.9958 18.5504C24.1397 16.6338 24.8 14.3925 24.8 12H23ZM21.4502 17.6279L19.7116 18.094L21.109 23.3069L22.8477 22.8408L24.5863 22.3747L23.1888 17.1618L21.4502 17.6279ZM22.8477 22.8408L23.3137 21.1022L18.1037 19.7057L17.6377 21.4443L17.1717 23.183L22.3816 24.5794L22.8477 22.8408ZM17.6377 21.4443L16.7136 19.8996C15.3347 20.7245 13.7253 21.2 12 21.2V23V24.8C14.3972 24.8 16.6427 24.1371 18.5618 22.989L17.6377 21.4443ZM12 23V21.2C6.91898 21.2 2.8 17.081 2.8 12H1H-0.8C-0.8 19.0692 4.93076 24.8 12 24.8V23ZM1 12H2.8C2.8 6.91898 6.91898 2.8 12 2.8V1V-0.8C4.93076 -0.8 -0.8 4.93076 -0.8 12H1Z"
                fill="black"
                mask="url(#path-1-inside-1_2551_1583)"
            />
        </Svg>
    </TouchableOpacity>
)

// ë©”ì‹œì§€ ì „ì†¡ ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
const SendIcon = ({ onPress }) => (
    <TouchableOpacity activeOpacity={0.6} onPress={onPress}>
        <Svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <G clipPath="url(#clip0_2551_1587)">
                <Path
                    d="M12.1268 20.3059L9.36079 11.2377C9.33084 11.1395 9.28439 11.0472 9.22367 10.965L9.15767 10.8859L2.68394 3.95038L21.5694 3.94999L12.1268 20.3059Z"
                    stroke="black"
                    strokeWidth="1.8"
                    strokeLinejoin="round"
                />
            </G>
            <Defs>
                <ClipPath id="clip0_2551_1587">
                    <Rect width="24" height="24" fill="white"/>
                </ClipPath>
            </Defs>
        </Svg>
    </TouchableOpacity>
)

// í”¼ë“œ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸
const FeedItem = ({ item }) => {
    const [liked, setLiked] = useState(false)

    return (
        <View style={{
            backgroundColor: 'white',
            marginBottom: 10,
            borderRadius: 10,
            overflow: 'hidden',
            marginHorizontal: 10
        }}>
            {/* í”„ë¡œí•„ í—¤ë” */}
            <View style={{
                flexDirection: 'row',
                alignItems: 'center',
                padding: 15
            }}>
                {/* í”„ë¡œí•„ ì´ë¯¸ì§€ */}
                <View style={{
                    width: 40,
                    height: 40,
                    borderRadius: 20,
                    backgroundColor: '#e0e0e0',
                    justifyContent: 'center',
                    alignItems: 'center',
                    marginRight: 12
                }}>
                    <Text style={{fontSize: 16}}>ğŸ‘¤</Text>
                </View>

                {/* ì‚¬ìš©ì ì´ë¦„ */}
                <View style={{flex: 1}}>
                    <Text style={{
                        fontSize: 16,
                        fontWeight: 'bold',
                        color: '#333'
                    }}>
                        {item.userName}
                    </Text>
                    <Text style={{
                        fontSize: 12,
                        color: '#666',
                        marginTop: 2
                    }}>
                        {item.time}
                    </Text>
                </View>
            </View>

            {/* í”¼ë“œ ì´ë¯¸ì§€ */}
            <View style={{
                width: '100%',
                height: 350,
                backgroundColor: '#f0f0f0',
                justifyContent: 'center',
                alignItems: 'center'
            }}>
                <Text style={{
                    fontSize: 18,
                    color: '#999'
                }}>
                    í”¼ë“œ ì´ë¯¸ì§€ {item.id}
                </Text>
            </View>

            {/* ì¸í„°ë™ì…˜ ë²„íŠ¼ë“¤ */}
            <View style={{
                flexDirection: 'row',
                alignItems: 'center',
                paddingHorizontal: 15,
                paddingVertical: 20,
                gap: 15
            }}>
                <LikeStarIcon
                    liked={liked}
                    onPress={() => {
                        setLiked(!liked)
                        console.log(`í”¼ë“œ ${item.id} ì¢‹ì•„ìš”: ${!liked}`)
                    }}
                />

                <CommentIcon
                    onPress={() => {
                        console.log(`í”¼ë“œ ${item.id} ëŒ“ê¸€ ì‘ì„±`)
                    }}
                />

                <SendIcon
                    onPress={() => {
                        console.log(`í”¼ë“œ ${item.id} ë©”ì‹œì§€ ì „ì†¡`)
                    }}
                />
            </View>

            {/* í”¼ë“œ ì†Œê°œê¸€ */}
            <View style={{
                paddingHorizontal: 10,
                paddingBottom: 15
            }}>
                <Text style={{
                    fontSize: 14,
                    color: '#333',
                    lineHeight: 30
                }}>
                    <Text style={{
                        fontWeight: 'bold',
                        color: '#000'
                    }}>
                        {item.userName}
                    </Text>
                    {' '}
                    {item.description}
                </Text>
            </View>
        </View>
    )
}

const homePage=()=>{
    const {userData,getInfo}=useUser()
    const [feedData, setFeedData] = useState([])
    const [loading, setLoading] = useState(false)
    const [page, setPage] = useState(1)
    const flatListRef = useRef(null)

    // ëœë¤ ì†Œê°œê¸€ ìƒì„± í•¨ìˆ˜
    const getRandomDescription = () => {
        const descriptions = [
            "ì˜¤ëŠ˜ í•˜ë£¨ë„ ê³ ìƒ ë§ì•˜ì–´ìš”! ğŸŒŸ",
            "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì‹œì‘! ì—´ì‹¬íˆ í•´ë³´ê² ìŠµë‹ˆë‹¤ ğŸ’ª",
            "ì»¤í”¼ í•œ ì”ì˜ ì—¬ìœ ë¡œì›€... â˜•",
            "íŒ€ì›ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ì‹œê°„ì´ ê°€ì¥ ì¦ê±°ì›Œìš” ğŸ‘¥",
            "ì½”ë”©í•˜ëŠ” ìƒˆë²½ì˜ ê³ ìš”í•¨ì´ ì¢‹ì•„ìš” ğŸŒ™",
            "ì˜¤ëŠ˜ ë°°ìš´ ê²ƒë“¤ì„ ì •ë¦¬í•´ë³´ëŠ” ì‹œê°„ ğŸ“š",
            "ì„±ì·¨ê° ê°€ë“í•œ í•˜ë£¨ì˜€ë„¤ìš”! âœ¨",
            "ë™ë£Œë“¤ê³¼ì˜ í˜‘ì—…ì´ ë§Œë“¤ì–´ë‚¸ ê²°ê³¼ë¬¼ ğŸ¤",
            "ìƒˆë¡œìš´ ê¸°ìˆ  ìŠ¤íƒì— ë„ì „í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤ ğŸš€",
            "ì¼ê³¼ íœ´ì‹ì˜ ì™„ë²½í•œ ë°¸ëŸ°ìŠ¤ âš–ï¸",
            "ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ëŠ” ìˆœê°„ ğŸ’¡",
            "ë””ë²„ê¹… ì„±ê³µ! ë¿Œë“¯í•œ ìˆœê°„ì…ë‹ˆë‹¤ ğŸ›âœ…",
            "ì‚¬ìš©ì í”¼ë“œë°±ì„ ë°˜ì˜í•œ ìƒˆë¡œìš´ ê¸°ëŠ¥ ğŸ”„",
            "ë§ˆê°ì„ ì•ë‘” ì—´ì •ì ì¸ ê°œë°œ ì‹œê°„ â°",
            "ì¢‹ì€ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ëŠ” í”„ë¡œì íŠ¸ â¤ï¸"
        ]
        return descriptions[Math.floor(Math.random() * descriptions.length)]
    }

    // ê°€ì§œ í”¼ë“œ ë°ì´í„° ìƒì„± í•¨ìˆ˜
    const generateFeedData = (pageNum) => {
        const users = ['ê¹€ì² ìˆ˜', 'ì´ì˜í¬', 'ë°•ë¯¼ìˆ˜', 'ì •ì§€ì€', 'ìµœìƒí›ˆ']
        const newData = []

        for(let i = 0; i < 5; i++) {
            const feedId = (pageNum - 1) * 5 + i + 1
            newData.push({
                id: feedId,
                userName: users[i % users.length],
                time: `${Math.floor(Math.random() * 12) + 1}ì‹œê°„ ì „`,
                description: getRandomDescription(),
                image: null // ë‚˜ì¤‘ì— ì‹¤ì œ ì´ë¯¸ì§€ URL ì¶”ê°€
            })
        }
        return newData
    }

    // ì´ˆê¸° í”¼ë“œ ë¡œë“œ
    const loadInitialFeed = () => {
        const initialData = generateFeedData(1)
        setFeedData(initialData)
    }

    // ì¶”ê°€ í”¼ë“œ ë¡œë“œ (ë¬´í•œìŠ¤í¬ë¡¤)
    const loadMoreFeed = () => {
        if (loading) return

        setLoading(true)

        // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ (1ì´ˆ ë”œë ˆì´)
        setTimeout(() => {
            const nextPage = page + 1
            const newData = generateFeedData(nextPage)

            setFeedData(prevData => [...prevData, ...newData]) // ê¸°ì¡´ ë°ì´í„°ì— ì¶”ê°€
            setPage(nextPage)
            setLoading(false)
        }, 1000)
    }

    // íƒ­ì— í¬ì»¤ìŠ¤ë  ë•Œë§ˆë‹¤ í”¼ë“œ ì´ˆê¸°í™”
    useFocusEffect(
        useCallback(() => {
            // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            getInfo()

            // í”¼ë“œ ë°ì´í„° ì´ˆê¸°í™”
            setFeedData([])
            setPage(1)
            setLoading(false)

            // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ë§¨ ìœ„ë¡œ ì´ˆê¸°í™”
            if (flatListRef.current) {
                flatListRef.current.scrollToOffset({ offset: 0, animated: false })
            }

            // ì´ˆê¸° í”¼ë“œ ë¡œë“œ
            loadInitialFeed()
        }, [])
    )

    return(
        <View style={{flex:1}}>
            <View style={{
                flex:1,
                flexDirection: 'row',
                justifyContent: 'space-between',
                alignItems: 'center',
                paddingHorizontal: 20
            }}>
                <GitTeolLogo />

                <View style={{flexDirection: 'row'}}>
                    <TouchableOpacity
                        style={{marginRight: 20}}
                        activeOpacity={0.6}
                        onPress={() => {
                            console.log('SMS ì•„ì´ì½˜ í´ë¦­!')
                            // ë‚˜ì¤‘ì— SMS ê¸°ëŠ¥ ì¶”ê°€
                        }}
                    >
                        <SmsIcon />
                    </TouchableOpacity>

                    <TouchableOpacity
                        activeOpacity={0.6}
                        onPress={() => {
                            console.log('Star ì•„ì´ì½˜ í´ë¦­!')
                            // ë‚˜ì¤‘ì— ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥ ì¶”ê°€
                        }}
                    >
                        <StarIcon />
                    </TouchableOpacity>
                </View>
            </View>

            <View style={{flex:18, backgroundColor: '#f8f9fa'}}>
                <FlatList
                    ref={flatListRef}
                    data={feedData}
                    keyExtractor={(item) => item.id.toString()}
                    renderItem={({ item }) => <FeedItem item={item} />}
                    onEndReached={loadMoreFeed}
                    onEndReachedThreshold={0.1}
                    showsVerticalScrollIndicator={false}
                    contentContainerStyle={{
                        paddingTop: 10,
                        paddingBottom: 20
                    }}
                    ListFooterComponent={() => {
                        if (loading) {
                            return (
                                <View style={{
                                    padding: 20,
                                    alignItems: 'center'
                                }}>
                                    <ActivityIndicator size="large" color="#007AFF" />
                                    <Text style={{
                                        marginTop: 10,
                                        color: '#666',
                                        fontSize: 14
                                    }}>
                                        í”¼ë“œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                                    </Text>
                                </View>
                            )
                        }
                        return null
                    }}
                />
            </View>
        </View>
    )
}

export default homePage